<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

</head>
<body>
<div class="tab-pane fade" id="project-monitoring" role="tabpanel" aria-labelledby="home-tab" th:fragment="view-project-monitoring">

    <div class="container-fluid" style="padding: 0;">

        <div class="row">
            <div class="col-md-3">
                <form id="effortForm" th:action="@{/update-effort}" method="post">

                    <div class="form-group">
                        <label for="datePicker">Date:</label>
                        <input id="datePicker" name="date" class="form-control"  data-toggle="datepicker">
                    </div>

                    <div class="form-group">
                        <label for="requirementsAnalysis" class="col-form-label">Requirement Analysis Hours</label>
                        <input id="requirementsAnalysis" name="requirementsAnalysis" type="number" class="form-control" placeholder="0">
                    </div>

                    <div class="form-group">
                        <label for="designing" class="col-form-label">Designing Hours</label>
                        <input id="designing" name="designing" type="number" class="form-control" placeholder="0">
                    </div>

                    <div class="form-group">
                        <label for="coding" class="col-form-label">Coding Hours</label>
                        <input id="coding" name="coding" type="number" class="form-control" placeholder="0">
                    </div>

                    <div class="form-group">
                        <label for="testing" class="col-form-label">Testing Hours</label>
                        <input id="testing" name="testing" type="number" class="form-control" placeholder="0">
                    </div>

                    <div class="form-group">
                        <label for="projectManagement" class="col-form-label">Project Management Hours</label>
                        <input id="projectManagement" name="projectManagement" type="number" class="form-control" placeholder="0">
                    </div>

                    <input type="hidden" name="projectId" th:value="${project.id}">
                </form>

                <button style="float: right;" class="btn btn-labeled btn-success" type="submit" form="effortForm">
                    <span class="btn-label"><i class="fa fa-plus"></i></span>Update Hours
                </button>
            </div>

            <div class="col-md-3">

                <div class="form-group">
                    <label for="requirementsAnalysisTotal" class="col-form-label">Total Requirement Analysis Hours</label>
                    <input id="requirementsAnalysisTotal" name="requirementsAnalysisTotal" th:value="${requirementAnalysisTotal}" type="number" class="form-control" readonly>
                </div>

                <div class="form-group">
                    <label for="designingTotal" class="col-form-label">Total Designing Hours</label>
                    <input id="designingTotal" name="designingTotal" type="number" th:value="${designingTotal}" class="form-control" readonly>
                </div>

                <div class="form-group">
                    <label for="codingTotal" class="col-form-label">Total Coding Hours</label>
                    <input id="codingTotal" name="codingTotal" type="number" th:value="${codingTotal}" class="form-control" readonly>
                </div>

                <div class="form-group">
                    <label for="testingTotal" class="col-form-label">Total Testing Hours</label>
                    <input id="testingTotal" name="testingTotal" type="number" th:value="${testingTotal}" class="form-control" readonly>
                </div>

                <div class="form-group">
                    <label for="projectManagementTotal" class="col-form-label">Total Project Management Hours</label>
                    <input id="projectManagementTotal" name="projectManagementTotal" th:value="${projectMgtTotal}" type="number" class="form-control" readonly>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div id="chartContainer" style="width:100%; height: 400px"></div>
                    <script th:inline="javascript">

                        var dps = [];
                        var chart = new CanvasJS.Chart("chartContainer", {
                            exportEnabled: true,
                            animationEnabled: true,
                            theme: "light2", // "light1", "dark1", "dark2"
                            title: {
                                text: "Project Effort Distribution"
                            },
                            subtitles: [{
                                text: "Total Effort in Person Hours"
                            }],
                            data: [{
                                type: "pie",
                                yValueFormatString: "#,##0\"%\"",
                                indexLabel: "{label} - {y}",
                                dataPoints: [
                                    { label: "Requirement Analysis", y: 20 },
                                    { label: "Designing", y: 20 },
                                    { label: "Coding", y: 20 },
                                    { label: "Testing", y: 20 },
                                    { label: "Project Management", y: 20 }
                                ]
                            }]
                        });
                        chart.render();


                        /*
                         To get data from Service and to update chart, perform a AJAX request to get data, update the chart with received data and re-render the chart
                         Please refer the following links for more info on accessing data / rest-service
                         https://www.thymeleaf.org/doc/articles/springmvcaccessdata.html
                         https://spring.io/guides/gs/rest-service/
                         */
                        /*<![CDATA[*/
                        /*$.get( "/dataPoints", function( data ) {*/
                        /* Update dataPoints from AJAX and render the chart*/
                        /*[+
                            //chart.options.data[0].dataPoints = JSON.parse([[${session.dataPoints}]]);
                            //chart.render();
                         +]*/
                        /*});*/
                        /*]]>*/
                    </script>
                </div>
            </div>
        </div>

        <div class="row">
            <h4>Recent</h4>
        </div>
    </div>
</div>

</body>
</html>